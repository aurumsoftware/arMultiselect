!function(){"use strict";angular.module("aurum-multiselect",[]).directive("aurumMultiselect",["$filter","$document","$timeout",function(e,t,n){return{restrict:"AE",scope:{selectedModel:"=",options:"=",events:"=",label:"@",search:"@",placeholder:"@",dynamicTitle:"@",ngDisabled:"="},template:function(e,t){var n='<div class="multiselect-parent btn-group dropdown-multiselect" ng-class="{ active: open }">';return n+='<button type="button" ng-disabled="ngDisabled" class="dropdown-toggle arButton" ng-class="settings.buttonClasses" ng-click="toggleDropdown()"><span class="arButtonLabel">{{getButtonText()}}&nbsp;</span><i class="caret"></i></button>',n+='<ul class="dropdown-menu dropdown-menu-form" ng-style="{display: open ? \'block\' : \'none\' }" style="overflow: scroll" >',n+='<li ng-show="enableSearch"><div class="dropdown-header"><input type="text" class="form-control" style="width: 100%;" ng-model="searchFilter" placeholder="{{texts.searchPlaceholder}}" /></li>',n+='<li class="presentation" role="presentation" ng-repeat="option in options | filter: searchFilter">',n+="<div class=\"menu-item\" data-ng-class=\"{'selected': isChecked(getPropertyForObject(option)), 'not-selected': !isChecked(getPropertyForObject(option))}\">",n+='<div class="menu-item-label" role="menuitem" tabindex="-1" ng-click="setSelectedItem(getPropertyForObject(option))" title="{{getPropertyForObject(option, settings.displayProp)}}" >{{getPropertyForObject(option, settings.displayProp)}}</div>',n+="</li>",n+="</ul>",n+="</div>"},link:function(e,o,l){"true"===l.dynamicTitle?e.dynamicTitle=!0:e.dynamicTitle=!1,e.externalEvents={onItemSelect:angular.noop,onInitDone:angular.noop},e.settings={displayProp:l.label,buttonClasses:"btn btn-default",dynamicTitle:e.dynamicTitle,smartButtonTextConverter:angular.noop},e.texts={searchPlaceholder:l.search,buttonDefaultText:l.placeholder||"Select"};var s=o.children()[0];e.toggleDropdown=function(){e.open=!e.open,n(function(){o[0].querySelector(".form-control").focus()},200)},l.search?e.enableSearch=!0:e.enableSearch=!1,angular.extend(e.settings,e.extraSettings||[]),angular.extend(e.externalEvents,e.events||[]),angular.extend(e.texts,e.translationTexts);var r=function(t){for(var n=t.target.parentElement,o=!1;angular.isDefined(n)&&null!==n&&!o;)_.contains(n.className.split(" "),"multiselect-parent")&&!o&&n===s&&(o=!0),n=n.parentElement;o||e.$apply(function(){e.open=!1})};t.on("click",r),e.$on("$destroy",function(){t.off("click",r)}),e.getButtonText=function(){if(e.settings.dynamicTitle&&angular.isObject(e.selectedModel)&&(e.selectedModel.length>0||_.keys(e.selectedModel).length>0)){var t=[];return angular.forEach(e.options,function(n){if(e.isChecked(e.getPropertyForObject(n))){var o=e.getPropertyForObject(n,e.settings.displayProp),l=e.settings.smartButtonTextConverter(o,n);t.push(l?l:o)}}),e.selectedModel.length>e.settings.smartButtonMaxItems&&(t=t.slice(0,e.settings.smartButtonMaxItems),t.push("...")),t.join(", ")}return e.texts.buttonDefaultText},e.getPropertyForObject=function(e,t){return t?angular.isDefined(e)&&e.hasOwnProperty(t)?e[t]:"":angular.isDefined(e)?e:""},e.setSelectedItem=function(t){e.selectedModel.push(t),e.externalEvents.onItemSelect(t)},e.isChecked=function(t){return _.findIndex(e.selectedModel,t)!==-1},e.externalEvents.onInitDone()}}}])}();